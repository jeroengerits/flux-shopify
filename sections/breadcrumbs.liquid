{% comment %}
  Dynamic Breadcrumb Section
  Automatically generates breadcrumbs based on the current page context
  Supports: pages, products, collections, blogs, articles, and search results
{% endcomment %}

{%- liquid
  assign breadcrumb_items = ''
  assign current_title = ''
  assign current_url = ''

  case template
    when 'page'
      assign current_title = page.title
      assign current_url = page.url
      assign breadcrumb_items = 'page'
    when 'product'
      assign current_title = product.title
      assign current_url = product.url
      assign breadcrumb_items = 'product'
    when 'collection'
      assign current_title = collection.title
      assign current_url = collection.url
      assign breadcrumb_items = 'collection'
    when 'blog'
      assign current_title = blog.title
      assign current_url = blog.url
      assign breadcrumb_items = 'blog'
    when 'article'
      assign current_title = article.title
      assign current_url = article.url
      assign breadcrumb_items = 'article'
    when 'search'
      assign current_title = 'Search Results'
      assign current_url = routes.search_url
      assign breadcrumb_items = 'search'
    when '404'
      assign current_title = 'Page Not Found'
      assign current_url = ''
      assign breadcrumb_items = '404'
    else
      assign current_title = page_title
      assign current_url = request.path
      assign breadcrumb_items = 'default'
  endcase
-%}

<div class='px-6'>
  <nav class='flex items-center gap-1 text-sm' aria-label='Breadcrumb'>
    {% render 'link', text: 'Home', url: routes.root_url %}
    {% render 'chevron' %}
    {% if breadcrumb_items == 'product' %}
      {% render 'link', text: 'Shop', url: '/collections/all' %}
      {% render 'chevron' %}
    {% endif %}
    <span class='text-brand-neutral-900 font-medium' aria-current='page'>
      {% if current_title == 'Products' %}
        Shop
      {% else %}
        {{ current_title }}
      {% endif %}
    </span>
  </nav>
</div>

{% schema %}
{
  "name": "Breadcrumb",
  "settings": [],
  "presets": [
    {
      "name": "Breadcrumb",
      "category": "Navigation"
    }
  ]
}
{% endschema %}
